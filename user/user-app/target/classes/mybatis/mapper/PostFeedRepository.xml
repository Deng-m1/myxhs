<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.dbj.infrastructure.follow.dao.AttentionDao">
    <parameterMap id="attentionParameterMap" type="cn.dbj.infrastructure.follow.entity.AttentionDo">
        <parameter property="userId" javaType="java.lang.Long"/>
        <parameter property="attentionId" javaType="java.lang.Long"/>
        <parameter property="delFlag" javaType="java.lang.Integer"/>
    </parameterMap>


    <insert id="insertOrUpdate" parameterType="cn.dbj.infrastructure.follow.entity.AttentionDo">
        INSERT INTO attention (id, user_id, attention_id, del_flag)
        SELECT id, #{userId}, #{attentionId}, #{delFlag}
        FROM attention
        WHERE user_id = #{userId} AND attention_id = #{attentionId}
        LIMIT 1
        ON DUPLICATE KEY UPDATE del_flag = VALUES(del_flag);
    </insert>





</mapper>
